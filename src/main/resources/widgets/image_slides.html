<div id="$id" class="slider carousel-slider " style="width: 100%; height: 100%;">
    <ul class="slides grey lighten-4 z-depth-3" style="border-radius: 10px">
        <li>

        </li>
    </ul>
</div>

<style>
    .slider .slides li img {
        background-size: 100% auto;
        background-position: center;
        background-repeat: no-repeat;
    }

    .slider .slides li{
        width: calc(100% - 4px);
        margin-left: 2px;
    }
    .slides{
        border: black 2px solid;
        padding: 2px;
    }
</style>

<script>

    $.get("/api/getWidgetConf?id=$id", (config) => {
        let param = config.param;
        let heigth = document.getElementById("$id").clientHeight;
        console.log(param);
        let imgHtml = "";
        for(let i=0; i<param.images.length; i=i+2){
            if(param.images[i].includes("jpg")){
                imgHtml += " <li>\n" +
                    "            <img src='data:image/png;base64," + param.images[i+1] + "'/>\n" +
                    "        </li>";
            }
            if(param.images[i].includes("mp4")){
                imgHtml +="        <li>\n" +
                    "            <video id='video' muted autoplay><source src='data:video/mp4;base64," + param.images[i+1] + "'/></video>\n" +
                    "        </li>" +
                    "   ";
            }
        }

        document.getElementById("$id").querySelector(".slides").innerHTML = imgHtml;
        var elems = document.querySelectorAll('.slider');
        M.Slider.init(elems, {height: heigth, indicators: false, interval: 6000});

    });
</script>

